<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</head>
<body>
    {% for link in links %}
        <a href="{{ link.url }}">{{ link.url }}</a>
        <br>
        predicted_score {{link.predicted_score}}
        <br>

        {% if link.has_feedback == True %}
            <button onclick="feedback('{{ link.id }}', false)" id="{{ link.id }}-bad" style="color:gray">Bad</button>
            <button onclick="feedback('{{ link.id }}', true)" id="{{ link.id }}-good" style="color:gray">Good</button>
        {% else %}
            <button onclick="feedback('{{ link.id }}', false)" id="{{ link.id }}-bad">Bad</button>
            <button onclick="feedback('{{ link.id }}', true)" id="{{ link.id }}-good">Good</button>
        {% endif %}
        <br>

        {% endfor %}
</body>
</html>
<script>
    async function feedback(id, is_good) {
		await fetch(`http://${window.location.hostname}:8081/link_feedback`, {
			method: 'POST',
			mode: 'no-cors',
			body: JSON.stringify({
				"id": id,
				"is_good": is_good
			})
		}).then(() => {
			document.getElementById(`${id}-bad`).className = "btn btn-outline-warning";
			document.getElementById(`${id}-good`).className = "btn btn-outline-success";
		});
	}
</script>